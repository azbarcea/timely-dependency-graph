@import "common";

* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    font-size: 0.4em;
    font-family: "Helvetica Neue", Helvetica, sans-serif;
}

html,
body,
#wrapper {
    width: 100%;
    height: 100%;
}

@colorSidebarGray: lighten(grey, 40%);
@clientLineStrokeDasharray: 2 2;

#wrapper {
    display: flex;

    #chart {
        flex: 1 1 0;

        display: flex;
        flex-direction: column;

        h1 {
            flex: 0 0 1.2em;
            padding: 0.6em 0.8em 1em;
            font-size: 2em;
        }

        svg {
            flex: 1;

            text {
                fill: black;
                stroke: none;
            }

            .axis {
                path.domain {
                    fill: none;
                    stroke: black;
                    stroke-width: 0.5;
                    stroke-opacity: 0.15;
                    shape-rendering: crispEdges;
                }

                &.y {
                    .tick {
                        line {
                            stroke: black;
                            stroke-width: 0.35;
                            stroke-dasharray: 1 1;
                        }
                        text.nodeYLabel {
                            font-weight: bold;
                        }
                        text.underlined {
                            text-decoration: underline;
                        }
                    }
                }
            }

            #modules {
                clipPath#clip {
                    fill: none;
                    pointer-events: all;
                }

                rect.sensor {
                    fill-opacity: 0;
                    stroke: none;
                }

                line.cursor {
                    stroke: black;
                    stroke-width: 0.65;
                    stroke-dasharray: 1 6;
                    stroke-opacity: 0.75;
                }
            }

            .release {
                rect {
                    fill: white;    // fallback
                    fill-opacity: 0.08;

                    stroke: black;
                    stroke-width: 0.16;
                    stroke-opacity: 0.08;

                    &.current {
                        fill-opacity: 0.2;
                    }
                    &.clickable {
                        cursor: pointer;
                    }
                    &:hover {
                        fill-opacity: 0.4;
                    }
                }
                text {
                    pointer-events: none;
                    dominant-baseline: middle;
                    text-anchor: middle;
                }
                circle {
                    pointer-events: none;
                    fill: white;    // fallback
                    fill-opacity: 0;

                    stroke: black;    // fallback
                    stroke-width: 3;
                    stroke-opacity: 1;

                    &.hasDeps {
                        fill-opacity: 1;
                    }
                }
                .dimmed {
                    opacity: 0.35;
                }
            }

            #depTree {
                path.serverSet {
                    fill: none;

                    // fallback
                    stroke: red;
                    stroke-width: 5;
                }

                line.serverLine {
                    // fallback
                    stroke: red;
                    stroke-width: 5;
                }

                line.clientLine {
                    stroke-width: 0.5;

                    // atm this is overridden by code
                    stroke-dasharray: @clientLineStrokeDasharray;

                    // fallback
                    stroke: black;
                }
            }
        }
    }

    #sidebar {
        flex: 0 0 20em;
        overflow-y: auto;

        .panel {
            border-left: 0.05em solid @colorSidebarGray;
        }

        .title {
            height: 3em;

            display: flex;
            align-items: center;
            justify-content: flex-end;

            padding-right: 1em;
            background-color: @colorSidebarGray;
        }

        .card {
            padding: 1em;
            border-bottom: 0.05em solid @colorSidebarGray;

            h2 {
                flex: 0 0 1em;
                align-self: flex-start;

                font-size: 1.1em;
            }

            .row {
                display: flex;
                align-items: center;
                padding-top: 1em;

                &.keyvalue {
                    p.key {
                        font-style: italic;
                        flex: 0 0 5em;
                    }
                    p.value {
                        flex: 1;
                    }
                }

                @symbolSize: 1.7em;

                &.control {
                    input[type="radio"],
                    input[type="checkbox"] {
                        flex: 0 0 @symbolSize;
                        width: @symbolSize / 2;
                        height: @symbolSize / 2;
                    }
                    label {
                        flex: 1;
                    }

                    &.indent {
                        margin-left: 1.5 * @symbolSize;
                    }
                }

                &.legend {
                    .repr {
                        width: @symbolSize;
                        height: @symbolSize;
                        // margin: 0.5em;
                        margin: 0 0.5em;
                    }

                    p.label {
                        flex: 1;
                    }
                }
            }

            @strokeWidth: 0.15em;
            @reprColor: grey;
            .repr {
                &.withdeps {
                    svg {
                        circle {
                            fill: @reprColor;
                            stroke: none;
                            stroke-width: @strokeWidth;
                        }
                    }
                }
                &.withoutdeps {
                    svg {
                        circle {
                            fill: none;
                            stroke: @reprColor;
                            stroke-width: @strokeWidth;
                        }
                    }
                }
                &.serversSet,
                &.clientLine {
                    svg {
                        line {
                            stroke: @reprColor;
                        }
                    }
                }
                &.serversSet {
                    svg {
                        line {
                            stroke-width: @strokeWidth;
                        }
                    }
                }
                &.clientLine {
                    svg {
                        line {
                            stroke-width: 1;
                            stroke-dasharray: @clientLineStrokeDasharray;
                        }
                    }
                }
            }
        }
    }
}
